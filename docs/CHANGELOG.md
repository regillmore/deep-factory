# Changelog

This file records completed agent passes. Keep entries brief and append new work in reverse chronological order. Current behavior belongs in [docs/CAPABILITIES.md](docs/CAPABILITIES.md), not here.

## 2026-03-02

- Task: Surface standalone player ceiling-contact transition events in the compact debug-edit status strip when the text debug HUD is hidden.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) plus [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) so the compact-strip model now formats ceiling-contact telemetry beside the existing hidden-HUD respawn and wall-contact event lines, extended [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts) to cover wrap-friendly multiline event rendering with ceiling transitions, wired [src/main.ts](../src/main.ts) to pass the latest ceiling-contact event into the compact strip only while the text debug HUD is hidden, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts src/ui/debugEditStatusStrip.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Surface standalone player wall-contact transition events in the compact debug-edit status strip when the text debug HUD is hidden.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) plus [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) so the compact-strip model now formats wall-contact telemetry beside the existing hidden-HUD respawn event line, extended [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts) to cover wrap-friendly multiline event rendering, wired [src/main.ts](../src/main.ts) to pass the latest wall-contact event into the compact strip only while the text debug HUD is hidden, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts src/ui/debugEditStatusStrip.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Surface standalone player auto-respawn events in the compact debug-edit status strip when the text debug HUD is hidden.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) plus [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) so the compact-strip model formats the latest embedded-respawn telemetry, updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) plus [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts) to render that telemetry as its own wrap-friendly status line, wired [src/main.ts](../src/main.ts) to pass the latest respawn event into the compact strip only while the text debug HUD is hidden, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts src/ui/debugEditStatusStrip.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Surface standalone player auto-respawn events in the debug overlay when embedded-tile recovery triggers.
- Changes: Added [src/world/playerRespawnEvent.ts](../src/world/playerRespawnEvent.ts) plus [src/world/playerRespawnEvent.test.ts](../src/world/playerRespawnEvent.test.ts) to capture embedded-recovery respawn telemetry from the resolved spawn point, updated [src/main.ts](../src/main.ts) to retain the latest auto-respawn event alongside the existing player transition telemetry, extended [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to render the latest respawn event line, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/world/playerRespawnEvent.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an authored-atlas asset regression test that default direct `render.uvRect` sources do not overlap the fully transparent exterior padding strip outside authored regions.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to enumerate shipped static and animated direct-`render.uvRect` sources through one helper and fail if any committed pixel rect overlaps the exterior padding strip beyond the authored atlas bounds; advanced [docs/NEXT.md](docs/NEXT.md) and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an authored-atlas asset regression test that explicitly unused authored regions stay unreferenced by default direct `render.uvRect` sources as well as atlas-index metadata.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to map shipped direct-`render.uvRect` sources back onto authored atlas regions and fail whenever metadata references a region documented as intentionally unused, then advanced [docs/NEXT.md](docs/NEXT.md) and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Surface the paused-main-menu fresh-world shortcut in shell copy once the keyboard action exists.
- Changes: Updated [src/ui/appShell.ts](../src/ui/appShell.ts) plus [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) so the paused main-menu secondary action now renders as `New World (N)` while preserving the existing destructive reset wording, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [README.md](../README.md).
- Verification: Ran `npx vitest run src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an authored-atlas asset regression test that static default direct `render.uvRect` sources stay inside authored atlas regions instead of overlapping uncovered canvas space.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to convert every static default direct-`render.uvRect` source into committed-atlas pixel bounds and fail when any pixel falls outside the explicit authored region set, then advanced [docs/NEXT.md](docs/NEXT.md) and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Surface the paused-main-menu resume shortcut in shell copy once the keyboard action exists.
- Changes: Updated [src/ui/appShell.ts](../src/ui/appShell.ts) plus [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) so the paused main-menu primary action now renders as `Resume World (Enter)` while first-entry copy stays unchanged, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [README.md](../README.md).
- Verification: Ran `npx vitest run src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Surface standalone player facing-transition events in the debug overlay when horizontal movement flips left or right between fixed steps.
- Changes: Added [src/world/playerFacingTransition.ts](../src/world/playerFacingTransition.ts) plus [src/world/playerFacingTransition.test.ts](../src/world/playerFacingTransition.test.ts) to classify fixed-step left/right facing flips, updated [src/main.ts](../src/main.ts) to retain the latest facing-transition event alongside the existing grounded, wall, and ceiling telemetry, extended [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to render the latest facing-transition line, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/world/playerFacingTransition.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add a desktop keyboard shortcut on the paused main menu that resumes the current world through the existing primary-action path.
- Changes: Updated [src/input/debugEditShortcuts.ts](../src/input/debugEditShortcuts.ts) plus [src/input/debugEditShortcuts.test.ts](../src/input/debugEditShortcuts.test.ts) to expose a context-aware paused-menu `resume-paused-world-session` shortcut action on `Enter`, wired [src/main.ts](../src/main.ts) to route that action through the existing main-menu primary-action resume path only when a resumable session exists, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [README.md](../README.md).
- Verification: Ran `npx vitest run src/input/debugEditShortcuts.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add a desktop keyboard shortcut on the paused main menu that starts a fresh world through the existing reset path.
- Changes: Updated [src/input/debugEditShortcuts.ts](../src/input/debugEditShortcuts.ts) plus [src/input/debugEditShortcuts.test.ts](../src/input/debugEditShortcuts.test.ts) to expose a context-aware paused-menu `start-fresh-world-session` shortcut action on `N` without stealing the in-world line-tool hotkey, wired [src/main.ts](../src/main.ts) to route that action through the existing paused-menu world reset path only when a resumable session exists, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/input/debugEditShortcuts.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add a paused-main-menu shell action that abandons the current session and boots a fresh world.
- Changes: Updated [src/ui/appShell.ts](../src/ui/appShell.ts) plus [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) so a paused main menu can expose a secondary `New World` action beside `Resume World`, added [src/gl/renderer.ts](../src/gl/renderer.ts) plus [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) reset coverage so the renderer can replace its active `TileWorld` and clear cached meshes without reinitializing WebGL, wired [src/main.ts](../src/main.ts) so `New World` resets world, player, camera, undo history, and shell toggle state back through the first-start path while preserving initialized renderer/input and persisted debug-edit prefs, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), [docs/DECISIONS.md](docs/DECISIONS.md), and [README.md](../README.md).
- Verification: Ran `npx vitest run src/ui/appShell.test.ts src/gl/renderer.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add a desktop keyboard shortcut that returns to the main menu from the in-world session without discarding the initialized world session.
- Changes: Updated [src/input/debugEditShortcuts.ts](../src/input/debugEditShortcuts.ts) plus [src/input/debugEditShortcuts.test.ts](../src/input/debugEditShortcuts.test.ts) to expose a dedicated `return-to-main-menu` shortcut action on `Q`, wired [src/main.ts](../src/main.ts) to route that shortcut through the existing session-preserving shell transition, refreshed [src/ui/appShell.ts](../src/ui/appShell.ts), [src/ui/touchDebugEditControls.ts](../src/ui/touchDebugEditControls.ts), [docs/CAPABILITIES.md](docs/CAPABILITIES.md), and [README.md](../README.md) with the new hotkey hint, and advanced [docs/NEXT.md](docs/NEXT.md) with one focused replacement task.
- Verification: Ran `npx vitest run src/input/debugEditShortcuts.test.ts src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an in-world shell action that returns to the main menu without discarding the initialized world session.
- Changes: Updated [src/ui/appShell.ts](../src/ui/appShell.ts) plus [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) so the in-world shell chrome now exposes a dedicated `Main Menu` action and explicit resumable main-menu copy, wired [src/main.ts](../src/main.ts) so returning to the menu pauses fixed-step world updates and in-world overlay visibility while preserving the initialized renderer, world, player, and debug-edit session for a later `Resume World`, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), [docs/DECISIONS.md](docs/DECISIONS.md), and [README.md](../README.md).
- Verification: Ran `npx vitest run src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an in-world shell toggle that separately shows or hides the full `Debug Edit` panel without affecting the compact edit overlays or edit state.
- Changes: Updated [src/ui/appShell.ts](../src/ui/appShell.ts) plus [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) so the shell now exposes an independent in-world `Edit Panel` toggle beside the existing compact overlay toggle, updated [src/main.ts](../src/main.ts) to track full-panel visibility separately and default it to hidden on desktop-oriented sessions while keeping the compact overlay shortcut on `V`, extended [src/ui/touchDebugEditControls.ts](../src/ui/touchDebugEditControls.ts) plus [src/ui/touchDebugEditControls.test.ts](../src/ui/touchDebugEditControls.test.ts) with explicit root visibility control, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), [docs/DECISIONS.md](docs/DECISIONS.md), and [README.md](../README.md).
- Verification: Ran `npx vitest run src/ui/appShell.test.ts src/ui/touchDebugEditControls.test.ts src/input/debugEditShortcuts.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add a desktop keyboard shortcut that toggles the in-world compact edit overlays without mutating edit or movement intent.
- Changes: Updated [src/input/debugEditShortcuts.ts](../src/input/debugEditShortcuts.ts) plus [src/input/debugEditShortcuts.test.ts](../src/input/debugEditShortcuts.test.ts) to expose a dedicated `toggle-debug-edit-overlays` shortcut action on `V`, wired [src/main.ts](../src/main.ts) to reuse the existing in-world compact-overlay visibility sync from the global desktop keydown path, refreshed [src/input/controller.test.ts](../src/input/controller.test.ts), [src/ui/appShell.ts](../src/ui/appShell.ts), [src/ui/touchDebugEditControls.ts](../src/ui/touchDebugEditControls.ts), [docs/CAPABILITIES.md](docs/CAPABILITIES.md), and [README.md](../README.md) with the new hotkey hint, and advanced [docs/NEXT.md](docs/NEXT.md) with one focused replacement task.
- Verification: Ran `npx vitest run src/input/debugEditShortcuts.test.ts src/input/controller.test.ts src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add a desktop keyboard shortcut that toggles the in-world spawn marker without mutating edit or movement intent.
- Changes: Updated [src/input/debugEditShortcuts.ts](../src/input/debugEditShortcuts.ts) plus [src/input/debugEditShortcuts.test.ts](../src/input/debugEditShortcuts.test.ts) to expose a dedicated `toggle-player-spawn-marker` shortcut action on `M`, wired [src/main.ts](../src/main.ts) to reuse the existing in-world spawn-marker visibility sync from the global desktop keydown path, refreshed [src/ui/appShell.ts](../src/ui/appShell.ts), [src/ui/touchDebugEditControls.ts](../src/ui/touchDebugEditControls.ts), [docs/CAPABILITIES.md](docs/CAPABILITIES.md), and [README.md](../README.md) with the new hotkey hint, and advanced [docs/NEXT.md](docs/NEXT.md) with one focused replacement task.
- Verification: Ran `npx vitest run src/input/debugEditShortcuts.test.ts src/input/controller.test.ts src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add a desktop keyboard shortcut that toggles the in-world debug HUD without mutating edit or movement intent.
- Changes: Updated [src/input/debugEditShortcuts.ts](../src/input/debugEditShortcuts.ts) plus [src/input/debugEditShortcuts.test.ts](../src/input/debugEditShortcuts.test.ts) to expose a dedicated `toggle-debug-overlay` shortcut action on `H`, wired [src/main.ts](../src/main.ts) to flip HUD visibility only while the world session is active, refreshed [src/ui/appShell.ts](../src/ui/appShell.ts) and [src/ui/touchDebugEditControls.ts](../src/ui/touchDebugEditControls.ts) with the new hotkey hint, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [README.md](../README.md).
- Verification: Ran `npx vitest run src/input/debugEditShortcuts.test.ts src/input/controller.test.ts src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add a desktop keyboard shortcut that recenters the camera on the standalone player without mutating movement intent.
- Changes: Updated [src/input/debugEditShortcuts.ts](../src/input/debugEditShortcuts.ts) plus [src/input/debugEditShortcuts.test.ts](../src/input/debugEditShortcuts.test.ts) to expose a dedicated `recenter-camera` shortcut action on `C`, wired [src/main.ts](../src/main.ts) to reuse the existing standalone-player recenter helper from the global desktop keydown path, refreshed [src/ui/appShell.ts](../src/ui/appShell.ts) and [src/ui/touchDebugEditControls.ts](../src/ui/touchDebugEditControls.ts) with shortcut hints, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [README.md](../README.md).
- Verification: Ran `npx vitest run src/input/debugEditShortcuts.test.ts src/input/controller.test.ts src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an in-world shell action that recenters the camera on the standalone player and clears accumulated manual follow offset.
- Changes: Updated [src/ui/appShell.ts](../src/ui/appShell.ts) plus [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) so the shell now exposes a dedicated in-world `Recenter Camera` action beside the existing toggles, extracted a small recenter helper in [src/core/cameraFollow.ts](../src/core/cameraFollow.ts) plus [src/core/cameraFollow.test.ts](../src/core/cameraFollow.test.ts), wired [src/main.ts](../src/main.ts) to zero the preserved follow offset and snap back to the standalone player's focus point when that shell action fires, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), [docs/DECISIONS.md](docs/DECISIONS.md), and [README.md](../README.md).
- Verification: Ran `npx vitest run src/ui/appShell.test.ts src/core/cameraFollow.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an in-world shell toggle that hides the standalone player spawn marker overlay without disabling world controls or simulation.
- Changes: Updated [src/ui/appShell.ts](../src/ui/appShell.ts) plus [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) so the shell now exposes a dedicated in-world `Spawn Marker` toggle state, updated [src/main.ts](../src/main.ts) to drive spawn-marker visibility through that shell state, extended [src/ui/playerSpawnMarkerOverlay.ts](../src/ui/playerSpawnMarkerOverlay.ts) with explicit visibility gating, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), [docs/DECISIONS.md](docs/DECISIONS.md), and [README.md](../README.md).
- Verification: Ran `npx vitest run src/ui/appShell.test.ts src/ui/playerSpawnMarkerOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Stop pointer-clicked in-world UI buttons from re-triggering on later `Space` presses meant for player jump.
- Changes: Added [src/ui/buttonFocus.ts](../src/ui/buttonFocus.ts) plus [src/ui/buttonFocus.test.ts](../src/ui/buttonFocus.test.ts) to classify pointer-generated button clicks and release focus after those activations, then applied that helper in [src/ui/appShell.ts](../src/ui/appShell.ts), [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts), and [src/ui/touchDebugEditControls.ts](../src/ui/touchDebugEditControls.ts) so shell toggles and debug-edit panel buttons no longer stay focused after mouse or touch clicks while keyboard-triggered button activation still works.
- Verification: Ran `npx vitest run src/ui/buttonFocus.test.ts src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Fix the app-shell in-world transition so the centered shell overlay actually disappears after entering the world.
- Changes: Updated [src/ui/appShell.ts](../src/ui/appShell.ts) so shell regions with CSS-managed layout now also receive explicit inline `display` values when state changes, preventing the shell's author CSS from overriding the browser `hidden` behavior during the `main-menu` to `in-world` transition; extended [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) with focused visibility-display coverage.
- Verification: Ran `npx vitest run src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an in-world shell toggle that hides the compact debug-edit overlays without disabling world controls or simulation.
- Changes: Updated [src/ui/appShell.ts](../src/ui/appShell.ts) plus [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) so the shell now exposes a second in-world `Edit Overlays` toggle state, updated [src/main.ts](../src/main.ts) to drive one shared compact-overlay visibility flag through the shell, and added explicit visibility hooks in [src/ui/hoveredTileCursor.ts](../src/ui/hoveredTileCursor.ts), [src/ui/armedDebugToolPreviewOverlay.ts](../src/ui/armedDebugToolPreviewOverlay.ts), and [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) so the compact status strip, inspect outlines, and one-shot preview overlays can be hidden without interrupting controls or simulation; refreshed [src/style.css](../src/style.css), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), [docs/DECISIONS.md](docs/DECISIONS.md), and [README.md](../README.md).
- Verification: Ran `npx vitest run src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Surface standalone player ceiling-contact transition events in the debug overlay when upward collision blocking appears or clears between fixed steps.
- Changes: Added [src/world/playerCeilingContactTransition.ts](../src/world/playerCeilingContactTransition.ts) plus [src/world/playerCeilingContactTransition.test.ts](../src/world/playerCeilingContactTransition.test.ts) to classify fixed-step ceiling-contact appearance and clearing, updated [src/main.ts](../src/main.ts) to compare player ceiling-contact probes across fixed steps and retain the latest event beside the existing grounded and wall transition telemetry, extended [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to render the latest ceiling-contact event in the HUD, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/world/playerCeilingContactTransition.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Surface standalone player wall-contact transition events in the debug overlay when horizontal collision blocking appears or clears between fixed steps.
- Changes: Added [src/world/playerWallContactTransition.ts](../src/world/playerWallContactTransition.ts) plus [src/world/playerWallContactTransition.test.ts](../src/world/playerWallContactTransition.test.ts) to classify fixed-step wall-contact appearance and clearing, updated [src/main.ts](../src/main.ts) to compare player wall-contact probes across fixed steps and keep the latest event beside the existing grounded-transition telemetry, extended [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to render the latest wall-contact event in the HUD, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/world/playerWallContactTransition.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Move debug overlay visibility behind shell/UI toggles instead of always-on bootstrap wiring.
- Changes: Updated [src/ui/appShell.ts](../src/ui/appShell.ts) plus [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) so the shell now exposes an in-world `Debug HUD` toggle state, refreshed [src/style.css](../src/style.css) with matching in-world chrome styling, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) so the text HUD honors explicit visibility instead of forcing itself on every frame, wired [src/main.ts](../src/main.ts) so entering the world and the new shell toggle drive that visibility, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), [docs/DECISIONS.md](docs/DECISIONS.md), and [README.md](../README.md).
- Verification: Ran `npx vitest run src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an app shell with explicit `boot`, `main menu`, and `in-world` states.
- Changes: Added [src/ui/appShell.ts](../src/ui/appShell.ts) plus [src/ui/appShell.test.ts](../src/ui/appShell.test.ts) for a focused shell-state model and overlay UI, updated [src/main.ts](../src/main.ts) so renderer bootstrap runs behind a boot screen, lands on a main menu after initialization, renders a static world preview before play, and only starts the fixed-step loop when `Enter World` is pressed, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) so the overlay stays hidden until in-world rendering actually begins, refreshed [src/style.css](../src/style.css) for the new shell presentation, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), [docs/DECISIONS.md](docs/DECISIONS.md), and [README.md](../README.md).
- Verification: Ran `npx vitest run src/ui/appShell.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an authored-atlas asset regression test that animated direct `render.uvRect` frames stay inside authored atlas regions instead of overlapping uncovered canvas space.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to convert every default animated direct-`render.uvRect` frame into committed-atlas pixel bounds and fail when any pixel falls outside the explicit authored region set, then advanced [docs/NEXT.md](docs/NEXT.md) and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Surface standalone player grounded-transition events in the debug overlay when jump, fall, or landing changes `grounded` between fixed steps.
- Changes: Added [src/world/playerGroundedTransition.ts](../src/world/playerGroundedTransition.ts) plus [src/world/playerGroundedTransition.test.ts](../src/world/playerGroundedTransition.test.ts) to classify fixed-step `grounded` flips as `jump`, `fall`, or `landing`, updated [src/main.ts](../src/main.ts) to retain the latest grounded-transition event from the shared player step path and clear stale events on spawn or respawn, extended [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to render that latest event in the overlay, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/world/playerGroundedTransition.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an authored-atlas asset regression test that committed non-transparent pixels do not spill outside authored regions referenced by default metadata or regions documented as intentionally unused.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to derive the authored regions touched by shipped atlas-index and direct-`render.uvRect` metadata, then scan the committed PNG for visible pixels outside that documented region set; advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Surface standalone player camera-follow telemetry (`focus`, `offset`) in the debug overlay after collision AABB telemetry lands.
- Changes: Updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) so the overlay formats a dedicated follow line beside the existing standalone player telemetry, wired [src/main.ts](../src/main.ts) to pass the live camera-follow focus point and preserved follow offset into that overlay snapshot each frame, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an authored-atlas asset regression test that every explicitly unused committed atlas region remains fully transparent in the committed PNG.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to enumerate every atlas region documented as intentionally unused and assert that each committed PNG region stays fully transparent, then advanced [docs/NEXT.md](docs/NEXT.md) and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Add an authored-atlas asset regression test that every pixel in the exterior padding strip outside all authored regions remains fully transparent in the committed PNG.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) so the committed atlas no longer passes with merely some transparent right-side padding pixels; the regression now treats the entire strip beyond the authored-region bounds as blank space and fails on any non-transparent spill, then advanced [docs/NEXT.md](docs/NEXT.md) and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Expand the committed atlas canvas with one documented unused authored region plus real exterior padding outside all authored regions.
- Changes: Updated [src/world/authoredAtlasLayout.ts](../src/world/authoredAtlasLayout.ts) to widen the authored atlas to `96x64`, reserve authored region `16` as intentionally unused, and leave uncovered canvas space to the right of the authored regions; regenerated [public/atlas/tile-atlas.png](../public/atlas/tile-atlas.png) onto the wider canvas while preserving the existing art in its original pixels; adjusted default direct-`render.uvRect` metadata and affected tests to the new atlas width; added focused coverage in [src/world/authoredAtlasLayout.test.ts](../src/world/authoredAtlasLayout.test.ts) and [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts); advanced [docs/NEXT.md](docs/NEXT.md) to remove stale completed renderer regressions, remove the completed atlas-expansion task, and add a padding-specific authored-atlas follow-up; and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/authoredAtlasLayout.test.ts src/gl/authoredAtlasAsset.test.ts src/world/tileMetadata.test.ts src/world/mesher.test.ts src/gl/texture.test.ts src/gl/renderer.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

- Task: Normalize away fully transparent RGB when authored-atlas animation regressions compare consecutive committed PNG frames, so invisible pixel drift does not satisfy the atlas-index or direct-`render.uvRect` frame-difference checks.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) so animated committed-frame comparisons now ignore RGB differences when both pixels are fully transparent while still failing on visible drift, added focused helper coverage for that normalization, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add an authored-atlas asset regression test that any default animated direct `render.uvRect` frame differs from its prior frame in the committed PNG.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to enumerate consecutive default direct-`render.uvRect` animation frames from shipped metadata, compare their committed PNG sub-rects pixel-for-pixel, and fail when any frame repeats its prior atlas art; then advanced [docs/NEXT.md](docs/NEXT.md) and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add an authored-atlas asset regression test that default animated direct `render.uvRect` frames stay aligned to whole atlas pixels in the committed PNG.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to enumerate default animated direct-`render.uvRect` frames from shipped metadata and assert, against the committed atlas PNG dimensions, that each frame source stays free of alignment warnings; then advanced [docs/NEXT.md](docs/NEXT.md) and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a renderer regression test that default animated direct `render.uvRect` tiles patch chunk UVs when elapsed animation frames advance.
- Changes: Updated [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) with a direct-`render.uvRect` animation regression around the default `debug_panel_blink` tile so renderer-time UV patch uploads are now locked to the expected frame-one and frame-zero sub-rects, then advanced [docs/NEXT.md](docs/NEXT.md).
- Verification: Ran `npx vitest run src/gl/renderer.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a default animated direct `render.uvRect` metadata tile plus committed atlas content so direct-frame authored-asset regressions exercise a real shipped path.
- Changes: Updated [src/world/tileMetadata.json](../src/world/tileMetadata.json) to add the default `debug_panel_blink` tile with direct `render.uvRect` animation frames against committed atlas pixels, expanded [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) with a regression that requires shipped metadata to include an animated direct-`uvRect` path backed by non-transparent committed PNG content, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Surface standalone player collision AABB telemetry (`min`, `max`, `size`) in the debug overlay after collision-contact telemetry lands.
- Changes: Updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) so live player telemetry now includes a formatted AABB line, wired [src/main.ts](../src/main.ts) to derive that AABB from the shared player-state helper, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Surface standalone player collision-contact telemetry (`support`, `wall`, `ceiling`) in the debug overlay after live player-state telemetry lands.
- Changes: Updated [src/world/playerState.ts](../src/world/playerState.ts) plus [src/world/playerState.test.ts](../src/world/playerState.test.ts) with a reusable current-AABB contact probe helper for support, wall, and ceiling tiles, extended [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to render those contact tiles in the live player readout, wired [src/main.ts](../src/main.ts) to feed the resolved contact telemetry into the overlay, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/world/playerState.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add an authored-atlas asset regression test that each default animated atlas-index frame differs from its prior frame in the committed PNG.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to enumerate consecutive atlas-index animation frames from default tile metadata, compare their committed PNG regions pixel-for-pixel, and fail when any animated frame repeats its prior atlas art; then advanced [docs/NEXT.md](docs/NEXT.md) and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add an authored-atlas asset regression test that direct `render.uvRect` default metadata only references committed PNG rects containing at least one non-transparent pixel.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to enumerate default direct-`render.uvRect` tiles, convert their committed PNG sub-rects into whole-pixel bounds, and assert that each referenced rect contains visible atlas content; then advanced [docs/NEXT.md](docs/NEXT.md) to remove the stale completed renderer regression, keep the remaining authored-atlas follow-up, and add two new replacement asset checks while updating [docs/CAPABILITIES.md](docs/CAPABILITIES.md) and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add an authored-atlas asset regression test that every committed region is either referenced by tile metadata or explicitly documented as intentionally unused.
- Changes: Updated [src/world/authoredAtlasLayout.ts](../src/world/authoredAtlasLayout.ts) with an explicit intentionally-unused region declaration table, expanded [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) so every committed authored atlas region must now be covered by tile metadata references or that documentation, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

## 2026-03-01

- Task: Add a renderer regression test that a re-streamed animated chunk rebuilt on frame-zero elapsed time skips redundant animated UV reuploads.
- Changes: Updated [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) with a prune-and-rebuild regression that clears prior GL uploads, rebuilds the animated chunk at elapsed frame zero, and asserts the renderer only performs the rebuild's dynamic vertex upload while skipping an extra animated UV patch upload; then advanced [docs/NEXT.md](docs/NEXT.md).
- Verification: Ran `npx vitest run src/gl/renderer.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add an authored-atlas asset regression test that default tile metadata only references authored atlas regions containing at least one non-transparent pixel in the committed PNG.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) with a minimal committed-PNG RGBA decoder, enumerated atlas-index references from default tile metadata across static render, animated frames, and terrain variant maps, and asserted that every referenced authored region contains at least one non-transparent pixel in [public/atlas/tile-atlas.png](../public/atlas/tile-atlas.png), then advanced [docs/NEXT.md](docs/NEXT.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a renderer regression test that a re-streamed animated chunk resumes elapsed-frame UV uploads after prune and rebuild.
- Changes: Updated [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) with a streaming round-trip regression plus a fixed-time mesh-queue drain helper so a rebuilt animated chunk is exercised at non-zero elapsed time and verified to reupload the correct frame UVs after prune, then advanced [docs/NEXT.md](docs/NEXT.md).
- Verification: Ran `npx vitest run src/gl/renderer.test.ts`.
- Task: Add an authored-atlas layout regression test that explicit atlas regions do not overlap each other.
- Changes: Added [src/world/authoredAtlasLayout.test.ts](../src/world/authoredAtlasLayout.test.ts) to assert every authored region has positive area, stays within the declared atlas bounds, and does not overlap any other region, then advanced [docs/NEXT.md](docs/NEXT.md).
- Verification: Ran `npx vitest run src/world/authoredAtlasLayout.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add an authored-atlas asset regression test that direct tile `render.uvRect` metadata still resolves to whole atlas pixels against the committed PNG dimensions.
- Changes: Updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to read the committed atlas PNG dimensions, enumerate real direct-`render.uvRect` tile metadata, and assert through the atlas-validation helper that those sources stay whole-pixel aligned against the shipped asset, then advanced [docs/NEXT.md](docs/NEXT.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Surface live standalone player input-intent telemetry in the debug overlay.
- Changes: Updated [src/input/controller.ts](../src/input/controller.ts) plus [src/input/controller.test.ts](../src/input/controller.test.ts) to expose a shared player input telemetry snapshot with `move`, `jumpHeld`, and rising-edge `jumpPressed`, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to render a dedicated intent line beside the existing player state readout, wired [src/main.ts](../src/main.ts) to pass the current input telemetry into the overlay each frame, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/input/controller.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a renderer regression test that animated chunk residency telemetry recovers after a previously pruned animated chunk streams back into view and the rebuilt animated mesh becomes resident again.
- Changes: Updated [src/world/world.ts](../src/world/world.ts) plus [src/world/world.test.ts](../src/world/world.test.ts) so sparse edited tile overrides survive chunk streaming prune and reapply when a chunk is rebuilt, expanded [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) with a streaming round-trip regression that verifies resident animated mesh and quad telemetry recover after prune and rebuild, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/world.test.ts src/gl/renderer.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Stabilize the renderer animated-chunk telemetry regressions so they do not depend on wall-clock mesh-build timing.
- Changes: Updated [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) with a shared warm-up helper that drains the mesh-build queue under a mocked `performance.now()` clock, applied that deterministic setup to the animated-UV upload and prune-telemetry regressions so later assertions no longer race normal queued mesh uploads, and advanced [docs/NEXT.md](docs/NEXT.md) to the next animated-streaming follow-up.
- Verification: Ran `npx vitest run src/gl/renderer.test.ts` 25 times in a row, ran `npm test`, and ran `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a renderer regression test that resident animated chunk telemetry drops after streaming prunes off-screen animated meshes.
- Changes: Updated [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) with a streaming-eviction regression that builds an animated chunk mesh, moves the camera outside the retain ring, and locks in that resident animated mesh and quad telemetry returns to zero after prune, then advanced [docs/NEXT.md](docs/NEXT.md) to the next animated-streaming follow-up.
- Verification: Ran `npx vitest run src/gl/renderer.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Surface resident animated chunk mesh counts and recorded animated-quad totals in debug telemetry.
- Changes: Updated [src/gl/renderer.ts](../src/gl/renderer.ts) plus [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) so renderer telemetry now reports how many cached ready chunk meshes retain animated state and how many animated quads they record, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to surface that steady-state footprint alongside the existing per-frame UV upload line, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/gl/renderer.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add debug telemetry for animated chunk UV uploads so renderer-side tile animation cost stays visible as authored frame counts grow.
- Changes: Updated [src/gl/animatedChunkMesh.ts](../src/gl/animatedChunkMesh.ts) plus [src/gl/animatedChunkMesh.test.ts](../src/gl/animatedChunkMesh.test.ts) so animated-frame application reports how many quads changed, updated [src/gl/renderer.ts](../src/gl/renderer.ts) plus [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) to track per-frame animated chunk UV upload counts, changed-quad totals, and uploaded bytes, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to surface that telemetry in the debug overlay, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/gl/renderer.test.ts src/ui/debugOverlay.test.ts src/gl/animatedChunkMesh.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Make the generated placeholder fallback atlas derive its canvas size and painted regions from the authored atlas layout.
- Changes: Updated [src/gl/texture.ts](../src/gl/texture.ts) so placeholder atlas generation sizes its canvas from the authored atlas dimensions and paints the explicit authored regions instead of a hard-coded `4x4` grid, expanded [src/gl/texture.test.ts](../src/gl/texture.test.ts) with a direct generator regression that inspects authored-region draw operations, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/texture.test.ts src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Surface live standalone player-state telemetry in the debug overlay.
- Changes: Updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to render a dedicated player line with live `position`, `velocity`, `grounded`, and `facing` values, wired [src/main.ts](../src/main.ts) to pass the current standalone player state into the overlay payload each frame, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add runtime pixel-alignment validation for tile `render.uvRect` metadata so authored sub-rects snap to whole atlas pixels at boot.
- Changes: Updated [src/gl/atlasValidation.ts](../src/gl/atlasValidation.ts) plus [src/gl/atlasValidation.test.ts](../src/gl/atlasValidation.test.ts) so direct static and animated `uvRect` render sources now warn when they resolve to non-integer atlas-pixel edges while preserving existing atlas-bounds checks, updated [src/gl/renderer.ts](../src/gl/renderer.ts) plus [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) to use the generalized atlas-validation warning path, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/atlasValidation.test.ts src/gl/renderer.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Fix the standalone player placeholder pose silhouette orientation so grounded and airborne poses render upright instead of upside down.
- Changes: Updated [src/gl/renderer.ts](../src/gl/renderer.ts) so the placeholder shader flips `uv.y` into pose-local space before applying grounded or airborne silhouette boxes, and expanded [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) with a regression test that locks the shader-source vertical flip in place.
- Verification: Ran `npx vitest run src/gl/renderer.test.ts src/gl/standalonePlayerPlaceholder.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add grounded and airborne placeholder pose variants to the renderer-side standalone player draw pass so jump state is readable before sprite assets land.
- Changes: Updated [src/gl/standalonePlayerPlaceholder.ts](../src/gl/standalonePlayerPlaceholder.ts) plus [src/gl/standalonePlayerPlaceholder.test.ts](../src/gl/standalonePlayerPlaceholder.test.ts) with explicit grounded versus airborne pose selection, updated [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) so the placeholder shader receives pose state and renders distinct grounded and airborne silhouettes, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/gl/standalonePlayerPlaceholder.test.ts src/gl/renderer.test.ts`.
- Task: Add a render-time animated-tile frame resolver that maps elapsed time into `render.frames` / `frameDurationMs` without changing terrain or static tile UV resolution.
- Changes: Updated [src/world/tileMetadata.ts](../src/world/tileMetadata.ts) plus [src/world/tileMetadata.test.ts](../src/world/tileMetadata.test.ts) with elapsed-time animated frame index and UV helpers, added a default animated `debug_blink` tile in [src/world/tileMetadata.json](../src/world/tileMetadata.json), updated [src/world/mesher.ts](../src/world/mesher.ts) plus [src/world/mesher.test.ts](../src/world/mesher.test.ts) so chunk meshes keep static frame-zero UVs while recording animated non-terrain quad offsets, added [src/gl/animatedChunkMesh.ts](../src/gl/animatedChunkMesh.ts) plus [src/gl/animatedChunkMesh.test.ts](../src/gl/animatedChunkMesh.test.ts) for renderer-side UV patching, updated [src/gl/renderer.ts](../src/gl/renderer.ts) plus [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) to reupload animated chunk buffers only when their frame changes, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/tileMetadata.test.ts src/world/mesher.test.ts src/gl/animatedChunkMesh.test.ts src/gl/renderer.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Update atlas-index validation so authored atlas regions are the source of truth instead of placeholder `4x4` slot assumptions.
- Changes: Added [src/world/authoredAtlasLayout.ts](../src/world/authoredAtlasLayout.ts) as the explicit authored atlas region table, updated [src/world/tileMetadata.ts](../src/world/tileMetadata.ts) plus [src/world/tileMetadata.test.ts](../src/world/tileMetadata.test.ts) so atlas-index validation and UV lookup derive from that layout, expanded [src/gl/atlasValidation.ts](../src/gl/atlasValidation.ts) plus [src/gl/atlasValidation.test.ts](../src/gl/atlasValidation.test.ts) to validate atlas-index-backed render and terrain sources against loaded atlas bounds, updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) and [src/world/mesher.test.ts](../src/world/mesher.test.ts) to consume the authored layout source of truth, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/tileMetadata.test.ts src/gl/atlasValidation.test.ts src/gl/authoredAtlasAsset.test.ts src/world/mesher.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a renderer-side placeholder player draw pass that renders the standalone player in world space instead of relying on the DOM overlay.
- Changes: Added [src/gl/standalonePlayerPlaceholder.ts](../src/gl/standalonePlayerPlaceholder.ts) plus [src/gl/standalonePlayerPlaceholder.test.ts](../src/gl/standalonePlayerPlaceholder.test.ts) for deterministic placeholder-player quad generation, updated [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) to upload and draw a facing-aware world-space player pass after terrain rendering, removed the old standalone-player DOM overlay wiring from [src/main.ts](../src/main.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/standalonePlayerPlaceholder.test.ts src/gl/renderer.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add runtime atlas-bounds validation that warns when tile `render.uvRect` metadata falls outside the loaded atlas dimensions.
- Changes: Added [src/gl/atlasValidation.ts](../src/gl/atlasValidation.ts) plus [src/gl/atlasValidation.test.ts](../src/gl/atlasValidation.test.ts) to scan static and animated `uvRect` render metadata against the loaded atlas size, updated [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) to run that validation at boot, retain warning telemetry, and emit a console warning when issues exist, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to surface atlas-validation status in the debug overlay, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/gl/atlasValidation.test.ts src/gl/renderer.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add the committed authored atlas asset and verify the runtime can use it instead of the placeholder fallback.
- Changes: Added [public/atlas/tile-atlas.png](../public/atlas/tile-atlas.png) as the first committed atlas image, added [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to verify the PNG exists and still matches the current `4x4` tile-slot dimensions expected by the loader and metadata, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts src/gl/texture.test.ts src/gl/renderer.test.ts` and `npm run build`.
- Task: Add mixed-device player input bindings and camera follow rules without removing the existing debug-edit controls.
- Changes: Added [src/core/cameraFollow.ts](../src/core/cameraFollow.ts) plus [src/core/cameraFollow.test.ts](../src/core/cameraFollow.test.ts) for follow-offset math, updated [src/input/controller.ts](../src/input/controller.ts) and [src/input/controller.test.ts](../src/input/controller.test.ts) to resolve shared desktop and touch movement intent, added [src/ui/touchPlayerControls.ts](../src/ui/touchPlayerControls.ts) for touch movement buttons, updated [src/world/playerState.ts](../src/world/playerState.ts) plus [src/world/playerState.test.ts](../src/world/playerState.test.ts) with player camera focus-point helpers, wired [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/main.ts](../src/main.ts) to step the player from mixed-device intent and preserve manual camera offsets during follow, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/core/cameraFollow.test.ts src/input/controller.test.ts src/world/playerState.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add optional animated tile render metadata (`frames`, `frameDurationMs`) without changing the current static UV path.
- Changes: Updated [src/world/tileMetadata.ts](../src/world/tileMetadata.ts) so render metadata can validate optional animation frames, require a matching static frame-zero source, and compile dense animation lookup tables plus UV-frame helpers, expanded [src/world/tileMetadata.test.ts](../src/world/tileMetadata.test.ts) with positive and negative animated-metadata coverage, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/tileMetadata.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a recovery path that respawns the standalone player from the latest resolved spawn when debug edits leave its AABB embedded in solid tiles.
- Changes: Updated [src/world/playerState.ts](../src/world/playerState.ts) with an embedded-solid recovery helper, wired [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/main.ts](../src/main.ts) to reuse the latest resolved spawn during post-edit recovery, expanded [src/world/playerState.test.ts](../src/world/playerState.test.ts) with focused respawn coverage, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/gl/renderer.test.ts src/world/playerState.test.ts src/world/collision.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Implement intent-driven standalone player walking and jumping on top of the shared fixed-step gravity and collision helpers.
- Changes: Updated [src/world/playerState.ts](../src/world/playerState.ts) with a movement-intent step helper that resolves grounded walk acceleration or braking, jump impulse, gravity, and collision response through the existing shared sweep path while preserving the gravity-only wrapper behavior, expanded [src/world/playerState.test.ts](../src/world/playerState.test.ts) with focused walk, wall-block, jump, airborne re-jump, braking, and option-validation coverage, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/playerState.test.ts src/world/collision.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Wire a spawned standalone player through the fixed update loop with gravity-only collision stepping before input-driven movement exists.
- Changes: Updated [src/world/playerState.ts](../src/world/playerState.ts) with a gravity-step helper that clamps fall speed before reusing collision sweeps, added [src/ui/standalonePlayerOverlay.ts](../src/ui/standalonePlayerOverlay.ts) plus [src/ui/standalonePlayerOverlay.test.ts](../src/ui/standalonePlayerOverlay.test.ts) so the spawned player stays visible in client space, wired [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/main.ts](../src/main.ts) to seed and advance standalone player state from the resolved spawn during fixed updates, expanded [src/world/playerState.test.ts](../src/world/playerState.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/playerState.test.ts src/ui/standalonePlayerOverlay.test.ts src/ui/playerSpawnMarkerOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a fixed-step player collision-move helper that advances `PlayerState` through per-axis AABB sweeps without input forces yet.
- Changes: Updated [src/world/playerState.ts](../src/world/playerState.ts) with a collision-stepping helper that sweeps horizontal then vertical movement, zeroes blocked axis velocity, and resolves grounded state from a post-move support probe, added focused coverage in [src/world/playerState.test.ts](../src/world/playerState.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/playerState.test.ts src/world/collision.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a debug-visible marker for the resolved player spawn point so spawn placement can be validated before the player controller is wired in.
- Changes: Added [src/ui/playerSpawnMarkerOverlay.ts](../src/ui/playerSpawnMarkerOverlay.ts) with screen-space spawn AABB, support-tile, and feet-anchor placement helpers plus [src/ui/playerSpawnMarkerOverlay.test.ts](../src/ui/playerSpawnMarkerOverlay.test.ts), updated [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/main.ts](../src/main.ts) to resolve and refresh spawn placement from the live world after tile edits, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to surface the resolved spawn in debug text, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/playerSpawnMarkerOverlay.test.ts src/ui/debugOverlay.test.ts src/world/playerSpawn.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Introduce a fixed-step player state model with spawn seeding, AABB derivation, and one-step kinematic integration helpers.
- Changes: Added [src/world/playerState.ts](../src/world/playerState.ts) with validated player state creation, spawn-based initialization, feet-centered AABB derivation, and fixed-step velocity integration, added focused coverage in [src/world/playerState.test.ts](../src/world/playerState.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/playerState.test.ts src/world/playerSpawn.test.ts src/world/collision.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Surface loaded atlas dimensions in debug-visible telemetry so authored atlas revisions can be validated in-runtime.
- Changes: Updated [src/gl/texture.ts](../src/gl/texture.ts) to capture atlas image dimensions for authored and placeholder loads, wired [src/gl/renderer.ts](../src/gl/renderer.ts) telemetry to retain those dimensions, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to render atlas size alongside the source kind, added focused coverage in [src/gl/texture.test.ts](../src/gl/texture.test.ts), [src/gl/renderer.test.ts](../src/gl/renderer.test.ts), and [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/gl/texture.test.ts src/gl/renderer.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a player spawn-point finder that locates grounded standing headroom near the world origin using the collision helpers.
- Changes: Added [src/world/playerSpawn.ts](../src/world/playerSpawn.ts) with a collision-backed spawn search that returns a standing AABB plus support tile near a chosen origin, added focused coverage in [src/world/playerSpawn.test.ts](../src/world/playerSpawn.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/world/playerSpawn.test.ts src/world/collision.test.ts src/world/world.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add world collision query helpers that read `solid` gameplay metadata for tile checks, AABB overlap, and per-axis sweeps.
- Changes: Added [src/world/collision.ts](../src/world/collision.ts) with metadata-backed `isSolidAt`, half-open world-space AABB overlap checks, and single-axis sweep helpers, added focused coverage in [src/world/collision.test.ts](../src/world/collision.test.ts), replaced the completed roadmap item in [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/world/collision.test.ts src/world/world.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Surface whether the renderer loaded the authored atlas or the placeholder fallback in debug-visible telemetry.
- Changes: Updated [src/gl/renderer.ts](../src/gl/renderer.ts) to record atlas source telemetry during initialization, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to render the atlas source kind in the debug overlay, added focused coverage in [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) and [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/gl/renderer.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add an atlas asset loader helper that fetches and decodes an authored image while preserving the generated placeholder atlas as a fallback.
- Changes: Updated [src/gl/texture.ts](../src/gl/texture.ts) with an authored-atlas loader plus shared texture upload helper, wired [src/gl/renderer.ts](../src/gl/renderer.ts) to try `/atlas/tile-atlas.png` before falling back, added focused coverage in [src/gl/texture.test.ts](../src/gl/texture.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/gl/texture.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Split empty compact status-strip hover guidance into wrap-friendly action segments on narrow mobile layouts instead of reflowing the whole sentence.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) so the empty hover state emits segmented action guidance, added focused expectations in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) and [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusStrip.test.ts src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Split compact debug-edit status strip hint text into wrap-friendly shortcut segments on narrow mobile layouts instead of letting long hint sentences reflow awkwardly.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) so idle, inspect-pin, and one-shot hint text is emitted as segmented multiline shortcut guidance, updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) to render the hint row through the existing wrap-friendly segmented detail layout, added focused coverage in [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts) and [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusStrip.test.ts src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Let compact debug-edit status strip summary chips wrap long brush or tool labels on narrow mobile layouts instead of truncating them to ellipses.
- Changes: Updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) so summary chips split fixed labels from wrap-friendly detail text and use multi-line chip styles instead of `nowrap` ellipsis truncation, added focused coverage in [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusStrip.test.ts src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Keep the compact debug-edit status strip action buttons within the viewport on narrow mobile layouts by stacking them before they clip.
- Changes: Updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) with a narrow-width action-row layout helper so inspect buttons fill the available strip width and stack vertically before clipping, added focused coverage in [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusStrip.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Keep the compact debug-edit status strip within the viewport on narrow mobile layouts by wrapping long preview and inspect lines.
- Changes: Updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) so preview and inspect detail text renders as wrap-friendly segmented rows instead of single long text nodes, added focused coverage in [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusStrip.test.ts src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Clamp the active one-shot preview status badge inside the visible canvas bounds when the canvas is small or offset within the page.
- Changes: Updated [src/ui/armedDebugToolPreviewOverlay.ts](../src/ui/armedDebugToolPreviewOverlay.ts) so the active preview badge uses canvas-relative bounded placement and border-box clipping instead of a fixed minimum width that could spill outside narrow canvases, added focused placement coverage in [src/ui/armedDebugToolPreviewOverlay.test.ts](../src/ui/armedDebugToolPreviewOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/armedDebugToolPreviewOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Clamp the persistent touch one-shot anchor label inside the visible canvas bounds when the anchor tile is near a viewport edge.
- Changes: Updated [src/ui/armedDebugToolPreviewOverlay.ts](../src/ui/armedDebugToolPreviewOverlay.ts) to measure and clamp the persistent touch anchor label against the live canvas rect instead of the viewport, added focused placement coverage in [src/ui/armedDebugToolPreviewOverlay.test.ts](../src/ui/armedDebugToolPreviewOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/armedDebugToolPreviewOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show active touch one-shot `Brush` or `Break` action text in the persistent on-canvas anchor label while the second point is still pending.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) so pending touch line and shape anchor labels include the armed `Brush` or `Break` action text alongside the tool name and tile coordinates, added focused regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show active touch one-shot anchor tile coordinates in the persistent on-canvas anchor label while the second point is still pending.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to build coordinate-bearing pending-touch anchor label text, updated [src/ui/armedDebugToolPreviewOverlay.ts](../src/ui/armedDebugToolPreviewOverlay.ts) to render that shared label text in the persistent touch anchor chip, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show live preview anchor and endpoint tile coordinates in the on-canvas preview badge while one-shot preview overlays are active.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) so the overlay badge reuses the existing coordinate-aware preview formatter, expanded [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) to cover live and pending coordinate text in the badge, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show live preview span dimensions in the on-canvas preview badge while one-shot preview overlays are active.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to share badge span formatting with the existing preview summary text, expanded [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) to cover live and pending badge span text, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show estimated affected tile counts in the on-canvas preview badge while one-shot preview overlays are active.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to share one-shot preview estimate resolution between the status strip and overlay badge, updated [src/ui/armedDebugToolPreviewOverlay.ts](../src/ui/armedDebugToolPreviewOverlay.ts) to append affected-tile text to the on-canvas badge only while preview overlays are active, added focused coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show estimated affected tile counts in the compact status strip while one-shot preview overlays are active.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to reuse the shared line and shape walkers for preview tile-count estimates in the compact status strip, expanded [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) with line, rectangle, and ellipse coverage, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show live line or shape span dimensions in the compact status strip while one-shot preview overlays are active.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to append inclusive tile-span dimensions to preview status text for active line, rectangle, and ellipse previews while leaving touch-start-only previews marked pending, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show active one-shot tool anchor and endpoint tile coordinates in the compact status strip while preview overlays are armed.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to derive preview anchor plus endpoint text from shared one-shot preview state, updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) to render a dedicated preview line in the compact strip, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show pinned tile inspect metadata in the debug overlay when a tile is pinned from the compact status strip.
- Changes: Updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to render a separate pinned inspect line alongside the existing pointer line, updated [src/main.ts](../src/main.ts) to pass pinned tile metadata into the overlay payload, added regression coverage in [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show hovered tile gameplay flags in the debug overlay pointer inspect line.
- Changes: Updated [src/main.ts](../src/main.ts) to pass hovered tile gameplay flags into the overlay payload, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to render solid, light-blocking, and liquid state alongside the existing hovered tile inspect data, added regression coverage in [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show hovered tile name plus tile ID in the debug overlay pointer inspect line.
- Changes: Updated [src/main.ts](../src/main.ts) to pass hovered tile identity into the overlay payload, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to render tile name plus tile ID in the pointer inspect line, added regression coverage in [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show chunk plus chunk-local tile coordinates in the debug overlay pointer inspect line.
- Changes: Updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to derive chunk and chunk-local tile coordinates from shared chunk math for pointer inspect text, added regression coverage in [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show chunk-local tile coordinates alongside world plus chunk coordinates in the compact status strip inspect metadata.
- Changes: Updated [src/main.ts](../src/main.ts) to attach chunk-local inspect coordinates from shared chunk math helpers, updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to render local coordinates for hover, pinned, and shared inspect states, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Stabilize compact status strip inspect hover metadata while the mouse is over the `Pin Click` or `Repin Click` action row.
- Changes: Updated [src/input/controller.ts](../src/input/controller.ts) to preserve mouse inspect state when the pointer leaves the canvas into registered retainer UI, updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) plus [src/main.ts](../src/main.ts) to register the compact status strip action row as a retainer, added regression coverage in [src/input/controller.test.ts](../src/input/controller.test.ts), refined [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/input/controller.test.ts src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

## 2026-02-28

- Task: Show chunk coordinates alongside tile coordinates in the compact status strip inspect metadata.
- Changes: Updated [src/main.ts](../src/main.ts) to attach chunk coordinates to shared inspect tile state, updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to render chunk coordinates in compact inspect metadata lines, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show the hovered-to-pinned tile offset in the compact status strip when both inspect targets are visible and different.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to append a compact `Hover->Pinned` offset line only for split inspect targets, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), and advanced [docs/NEXT.md](docs/NEXT.md) to the next inspect UX follow-up while updating [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Label the compact status strip inspect readout as shared when pinned and hovered targets resolve to the same tile.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) so deduplicated same-tile inspect state renders `Shared` labels in both the summary chip and metadata line, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), and advanced [docs/NEXT.md](docs/NEXT.md) to the next UX cleanup item.
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show separate hovered and pinned tile metadata lines in the compact status strip when both inspect targets differ.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to emit distinct pinned and hover inspect lines when their targets differ, updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) to render newline-separated inspect text, and added focused coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Render pinned and hovered inspect outlines simultaneously so desktop inspect-pin workflows can compare a locked tile against the current hover target.
- Changes: Updated [src/ui/hoveredTileCursor.ts](../src/ui/hoveredTileCursor.ts) to manage separate pinned and hovered overlay layers, wired [src/main.ts](../src/main.ts) to pass both inspect targets at render time, and added target-resolution coverage in [src/ui/hoveredTileCursor.test.ts](../src/ui/hoveredTileCursor.test.ts).
- Verification: Ran `npx vitest run src/ui/hoveredTileCursor.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Reorganized project documentation so `README.md` no longer doubles as both capability inventory and change history.
- Changes: Added [docs/CAPABILITIES.md](docs/CAPABILITIES.md) for current-state features and controls, added [docs/CHANGELOG.md](docs/CHANGELOG.md) for completed task history, trimmed [README.md](../README.md) into a concise project entry point, and updated [AGENTS.md](../AGENTS.md) to direct future agents to the new documentation flow.
- Verification: Reviewed the updated docs for consistency; tests were not run because this was a docs-only change.

## Entry Template

- Task: Short description of the completed roadmap item or documentation pass.
- Changes: The key files or behaviors that changed.
- Verification: Commands run, manual checks performed, or an explicit note that verification was not run.
