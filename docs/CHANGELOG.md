# Changelog

This file records completed agent passes. Keep entries brief and append new work in reverse chronological order. Current behavior belongs in [docs/CAPABILITIES.md](docs/CAPABILITIES.md), not here.

## 2026-03-01

- Task: Make the generated placeholder fallback atlas derive its canvas size and painted regions from the authored atlas layout.
- Changes: Updated [src/gl/texture.ts](../src/gl/texture.ts) so placeholder atlas generation sizes its canvas from the authored atlas dimensions and paints the explicit authored regions instead of a hard-coded `4x4` grid, expanded [src/gl/texture.test.ts](../src/gl/texture.test.ts) with a direct generator regression that inspects authored-region draw operations, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/texture.test.ts src/gl/authoredAtlasAsset.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Surface live standalone player-state telemetry in the debug overlay.
- Changes: Updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to render a dedicated player line with live `position`, `velocity`, `grounded`, and `facing` values, wired [src/main.ts](../src/main.ts) to pass the current standalone player state into the overlay payload each frame, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add runtime pixel-alignment validation for tile `render.uvRect` metadata so authored sub-rects snap to whole atlas pixels at boot.
- Changes: Updated [src/gl/atlasValidation.ts](../src/gl/atlasValidation.ts) plus [src/gl/atlasValidation.test.ts](../src/gl/atlasValidation.test.ts) so direct static and animated `uvRect` render sources now warn when they resolve to non-integer atlas-pixel edges while preserving existing atlas-bounds checks, updated [src/gl/renderer.ts](../src/gl/renderer.ts) plus [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) to use the generalized atlas-validation warning path, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/atlasValidation.test.ts src/gl/renderer.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Fix the standalone player placeholder pose silhouette orientation so grounded and airborne poses render upright instead of upside down.
- Changes: Updated [src/gl/renderer.ts](../src/gl/renderer.ts) so the placeholder shader flips `uv.y` into pose-local space before applying grounded or airborne silhouette boxes, and expanded [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) with a regression test that locks the shader-source vertical flip in place.
- Verification: Ran `npx vitest run src/gl/renderer.test.ts src/gl/standalonePlayerPlaceholder.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add grounded and airborne placeholder pose variants to the renderer-side standalone player draw pass so jump state is readable before sprite assets land.
- Changes: Updated [src/gl/standalonePlayerPlaceholder.ts](../src/gl/standalonePlayerPlaceholder.ts) plus [src/gl/standalonePlayerPlaceholder.test.ts](../src/gl/standalonePlayerPlaceholder.test.ts) with explicit grounded versus airborne pose selection, updated [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) so the placeholder shader receives pose state and renders distinct grounded and airborne silhouettes, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/gl/standalonePlayerPlaceholder.test.ts src/gl/renderer.test.ts`.
- Task: Add a render-time animated-tile frame resolver that maps elapsed time into `render.frames` / `frameDurationMs` without changing terrain or static tile UV resolution.
- Changes: Updated [src/world/tileMetadata.ts](../src/world/tileMetadata.ts) plus [src/world/tileMetadata.test.ts](../src/world/tileMetadata.test.ts) with elapsed-time animated frame index and UV helpers, added a default animated `debug_blink` tile in [src/world/tileMetadata.json](../src/world/tileMetadata.json), updated [src/world/mesher.ts](../src/world/mesher.ts) plus [src/world/mesher.test.ts](../src/world/mesher.test.ts) so chunk meshes keep static frame-zero UVs while recording animated non-terrain quad offsets, added [src/gl/animatedChunkMesh.ts](../src/gl/animatedChunkMesh.ts) plus [src/gl/animatedChunkMesh.test.ts](../src/gl/animatedChunkMesh.test.ts) for renderer-side UV patching, updated [src/gl/renderer.ts](../src/gl/renderer.ts) plus [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) to reupload animated chunk buffers only when their frame changes, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/tileMetadata.test.ts src/world/mesher.test.ts src/gl/animatedChunkMesh.test.ts src/gl/renderer.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Update atlas-index validation so authored atlas regions are the source of truth instead of placeholder `4x4` slot assumptions.
- Changes: Added [src/world/authoredAtlasLayout.ts](../src/world/authoredAtlasLayout.ts) as the explicit authored atlas region table, updated [src/world/tileMetadata.ts](../src/world/tileMetadata.ts) plus [src/world/tileMetadata.test.ts](../src/world/tileMetadata.test.ts) so atlas-index validation and UV lookup derive from that layout, expanded [src/gl/atlasValidation.ts](../src/gl/atlasValidation.ts) plus [src/gl/atlasValidation.test.ts](../src/gl/atlasValidation.test.ts) to validate atlas-index-backed render and terrain sources against loaded atlas bounds, updated [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) and [src/world/mesher.test.ts](../src/world/mesher.test.ts) to consume the authored layout source of truth, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/tileMetadata.test.ts src/gl/atlasValidation.test.ts src/gl/authoredAtlasAsset.test.ts src/world/mesher.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a renderer-side placeholder player draw pass that renders the standalone player in world space instead of relying on the DOM overlay.
- Changes: Added [src/gl/standalonePlayerPlaceholder.ts](../src/gl/standalonePlayerPlaceholder.ts) plus [src/gl/standalonePlayerPlaceholder.test.ts](../src/gl/standalonePlayerPlaceholder.test.ts) for deterministic placeholder-player quad generation, updated [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) to upload and draw a facing-aware world-space player pass after terrain rendering, removed the old standalone-player DOM overlay wiring from [src/main.ts](../src/main.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/gl/standalonePlayerPlaceholder.test.ts src/gl/renderer.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add runtime atlas-bounds validation that warns when tile `render.uvRect` metadata falls outside the loaded atlas dimensions.
- Changes: Added [src/gl/atlasValidation.ts](../src/gl/atlasValidation.ts) plus [src/gl/atlasValidation.test.ts](../src/gl/atlasValidation.test.ts) to scan static and animated `uvRect` render metadata against the loaded atlas size, updated [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) to run that validation at boot, retain warning telemetry, and emit a console warning when issues exist, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to surface atlas-validation status in the debug overlay, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/gl/atlasValidation.test.ts src/gl/renderer.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add the committed authored atlas asset and verify the runtime can use it instead of the placeholder fallback.
- Changes: Added [public/atlas/tile-atlas.png](../public/atlas/tile-atlas.png) as the first committed atlas image, added [src/gl/authoredAtlasAsset.test.ts](../src/gl/authoredAtlasAsset.test.ts) to verify the PNG exists and still matches the current `4x4` tile-slot dimensions expected by the loader and metadata, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/gl/authoredAtlasAsset.test.ts src/gl/texture.test.ts src/gl/renderer.test.ts` and `npm run build`.
- Task: Add mixed-device player input bindings and camera follow rules without removing the existing debug-edit controls.
- Changes: Added [src/core/cameraFollow.ts](../src/core/cameraFollow.ts) plus [src/core/cameraFollow.test.ts](../src/core/cameraFollow.test.ts) for follow-offset math, updated [src/input/controller.ts](../src/input/controller.ts) and [src/input/controller.test.ts](../src/input/controller.test.ts) to resolve shared desktop and touch movement intent, added [src/ui/touchPlayerControls.ts](../src/ui/touchPlayerControls.ts) for touch movement buttons, updated [src/world/playerState.ts](../src/world/playerState.ts) plus [src/world/playerState.test.ts](../src/world/playerState.test.ts) with player camera focus-point helpers, wired [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/main.ts](../src/main.ts) to step the player from mixed-device intent and preserve manual camera offsets during follow, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/core/cameraFollow.test.ts src/input/controller.test.ts src/world/playerState.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add optional animated tile render metadata (`frames`, `frameDurationMs`) without changing the current static UV path.
- Changes: Updated [src/world/tileMetadata.ts](../src/world/tileMetadata.ts) so render metadata can validate optional animation frames, require a matching static frame-zero source, and compile dense animation lookup tables plus UV-frame helpers, expanded [src/world/tileMetadata.test.ts](../src/world/tileMetadata.test.ts) with positive and negative animated-metadata coverage, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/tileMetadata.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a recovery path that respawns the standalone player from the latest resolved spawn when debug edits leave its AABB embedded in solid tiles.
- Changes: Updated [src/world/playerState.ts](../src/world/playerState.ts) with an embedded-solid recovery helper, wired [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/main.ts](../src/main.ts) to reuse the latest resolved spawn during post-edit recovery, expanded [src/world/playerState.test.ts](../src/world/playerState.test.ts) with focused respawn coverage, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/gl/renderer.test.ts src/world/playerState.test.ts src/world/collision.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Implement intent-driven standalone player walking and jumping on top of the shared fixed-step gravity and collision helpers.
- Changes: Updated [src/world/playerState.ts](../src/world/playerState.ts) with a movement-intent step helper that resolves grounded walk acceleration or braking, jump impulse, gravity, and collision response through the existing shared sweep path while preserving the gravity-only wrapper behavior, expanded [src/world/playerState.test.ts](../src/world/playerState.test.ts) with focused walk, wall-block, jump, airborne re-jump, braking, and option-validation coverage, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/playerState.test.ts src/world/collision.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Wire a spawned standalone player through the fixed update loop with gravity-only collision stepping before input-driven movement exists.
- Changes: Updated [src/world/playerState.ts](../src/world/playerState.ts) with a gravity-step helper that clamps fall speed before reusing collision sweeps, added [src/ui/standalonePlayerOverlay.ts](../src/ui/standalonePlayerOverlay.ts) plus [src/ui/standalonePlayerOverlay.test.ts](../src/ui/standalonePlayerOverlay.test.ts) so the spawned player stays visible in client space, wired [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/main.ts](../src/main.ts) to seed and advance standalone player state from the resolved spawn during fixed updates, expanded [src/world/playerState.test.ts](../src/world/playerState.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/playerState.test.ts src/ui/standalonePlayerOverlay.test.ts src/ui/playerSpawnMarkerOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a fixed-step player collision-move helper that advances `PlayerState` through per-axis AABB sweeps without input forces yet.
- Changes: Updated [src/world/playerState.ts](../src/world/playerState.ts) with a collision-stepping helper that sweeps horizontal then vertical movement, zeroes blocked axis velocity, and resolves grounded state from a post-move support probe, added focused coverage in [src/world/playerState.test.ts](../src/world/playerState.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/playerState.test.ts src/world/collision.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a debug-visible marker for the resolved player spawn point so spawn placement can be validated before the player controller is wired in.
- Changes: Added [src/ui/playerSpawnMarkerOverlay.ts](../src/ui/playerSpawnMarkerOverlay.ts) with screen-space spawn AABB, support-tile, and feet-anchor placement helpers plus [src/ui/playerSpawnMarkerOverlay.test.ts](../src/ui/playerSpawnMarkerOverlay.test.ts), updated [src/gl/renderer.ts](../src/gl/renderer.ts) and [src/main.ts](../src/main.ts) to resolve and refresh spawn placement from the live world after tile edits, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) plus [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts) to surface the resolved spawn in debug text, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/playerSpawnMarkerOverlay.test.ts src/ui/debugOverlay.test.ts src/world/playerSpawn.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Introduce a fixed-step player state model with spawn seeding, AABB derivation, and one-step kinematic integration helpers.
- Changes: Added [src/world/playerState.ts](../src/world/playerState.ts) with validated player state creation, spawn-based initialization, feet-centered AABB derivation, and fixed-step velocity integration, added focused coverage in [src/world/playerState.test.ts](../src/world/playerState.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md), [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md), and [docs/DECISIONS.md](docs/DECISIONS.md).
- Verification: Ran `npx vitest run src/world/playerState.test.ts src/world/playerSpawn.test.ts src/world/collision.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Surface loaded atlas dimensions in debug-visible telemetry so authored atlas revisions can be validated in-runtime.
- Changes: Updated [src/gl/texture.ts](../src/gl/texture.ts) to capture atlas image dimensions for authored and placeholder loads, wired [src/gl/renderer.ts](../src/gl/renderer.ts) telemetry to retain those dimensions, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to render atlas size alongside the source kind, added focused coverage in [src/gl/texture.test.ts](../src/gl/texture.test.ts), [src/gl/renderer.test.ts](../src/gl/renderer.test.ts), and [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/gl/texture.test.ts src/gl/renderer.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add a player spawn-point finder that locates grounded standing headroom near the world origin using the collision helpers.
- Changes: Added [src/world/playerSpawn.ts](../src/world/playerSpawn.ts) with a collision-backed spawn search that returns a standing AABB plus support tile near a chosen origin, added focused coverage in [src/world/playerSpawn.test.ts](../src/world/playerSpawn.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/world/playerSpawn.test.ts src/world/collision.test.ts src/world/world.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add world collision query helpers that read `solid` gameplay metadata for tile checks, AABB overlap, and per-axis sweeps.
- Changes: Added [src/world/collision.ts](../src/world/collision.ts) with metadata-backed `isSolidAt`, half-open world-space AABB overlap checks, and single-axis sweep helpers, added focused coverage in [src/world/collision.test.ts](../src/world/collision.test.ts), replaced the completed roadmap item in [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/world/collision.test.ts src/world/world.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Surface whether the renderer loaded the authored atlas or the placeholder fallback in debug-visible telemetry.
- Changes: Updated [src/gl/renderer.ts](../src/gl/renderer.ts) to record atlas source telemetry during initialization, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to render the atlas source kind in the debug overlay, added focused coverage in [src/gl/renderer.test.ts](../src/gl/renderer.test.ts) and [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/gl/renderer.test.ts src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Add an atlas asset loader helper that fetches and decodes an authored image while preserving the generated placeholder atlas as a fallback.
- Changes: Updated [src/gl/texture.ts](../src/gl/texture.ts) with an authored-atlas loader plus shared texture upload helper, wired [src/gl/renderer.ts](../src/gl/renderer.ts) to try `/atlas/tile-atlas.png` before falling back, added focused coverage in [src/gl/texture.test.ts](../src/gl/texture.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md) plus [docs/ARCHITECTURE.md](docs/ARCHITECTURE.md).
- Verification: Ran `npx vitest run src/gl/texture.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Split empty compact status-strip hover guidance into wrap-friendly action segments on narrow mobile layouts instead of reflowing the whole sentence.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) so the empty hover state emits segmented action guidance, added focused expectations in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) and [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusStrip.test.ts src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Split compact debug-edit status strip hint text into wrap-friendly shortcut segments on narrow mobile layouts instead of letting long hint sentences reflow awkwardly.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) so idle, inspect-pin, and one-shot hint text is emitted as segmented multiline shortcut guidance, updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) to render the hint row through the existing wrap-friendly segmented detail layout, added focused coverage in [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts) and [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusStrip.test.ts src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Let compact debug-edit status strip summary chips wrap long brush or tool labels on narrow mobile layouts instead of truncating them to ellipses.
- Changes: Updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) so summary chips split fixed labels from wrap-friendly detail text and use multi-line chip styles instead of `nowrap` ellipsis truncation, added focused coverage in [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusStrip.test.ts src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Keep the compact debug-edit status strip action buttons within the viewport on narrow mobile layouts by stacking them before they clip.
- Changes: Updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) with a narrow-width action-row layout helper so inspect buttons fill the available strip width and stack vertically before clipping, added focused coverage in [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusStrip.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Keep the compact debug-edit status strip within the viewport on narrow mobile layouts by wrapping long preview and inspect lines.
- Changes: Updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) so preview and inspect detail text renders as wrap-friendly segmented rows instead of single long text nodes, added focused coverage in [src/ui/debugEditStatusStrip.test.ts](../src/ui/debugEditStatusStrip.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusStrip.test.ts src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Clamp the active one-shot preview status badge inside the visible canvas bounds when the canvas is small or offset within the page.
- Changes: Updated [src/ui/armedDebugToolPreviewOverlay.ts](../src/ui/armedDebugToolPreviewOverlay.ts) so the active preview badge uses canvas-relative bounded placement and border-box clipping instead of a fixed minimum width that could spill outside narrow canvases, added focused placement coverage in [src/ui/armedDebugToolPreviewOverlay.test.ts](../src/ui/armedDebugToolPreviewOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/armedDebugToolPreviewOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Clamp the persistent touch one-shot anchor label inside the visible canvas bounds when the anchor tile is near a viewport edge.
- Changes: Updated [src/ui/armedDebugToolPreviewOverlay.ts](../src/ui/armedDebugToolPreviewOverlay.ts) to measure and clamp the persistent touch anchor label against the live canvas rect instead of the viewport, added focused placement coverage in [src/ui/armedDebugToolPreviewOverlay.test.ts](../src/ui/armedDebugToolPreviewOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/armedDebugToolPreviewOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show active touch one-shot `Brush` or `Break` action text in the persistent on-canvas anchor label while the second point is still pending.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) so pending touch line and shape anchor labels include the armed `Brush` or `Break` action text alongside the tool name and tile coordinates, added focused regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show active touch one-shot anchor tile coordinates in the persistent on-canvas anchor label while the second point is still pending.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to build coordinate-bearing pending-touch anchor label text, updated [src/ui/armedDebugToolPreviewOverlay.ts](../src/ui/armedDebugToolPreviewOverlay.ts) to render that shared label text in the persistent touch anchor chip, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show live preview anchor and endpoint tile coordinates in the on-canvas preview badge while one-shot preview overlays are active.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) so the overlay badge reuses the existing coordinate-aware preview formatter, expanded [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) to cover live and pending coordinate text in the badge, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show live preview span dimensions in the on-canvas preview badge while one-shot preview overlays are active.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to share badge span formatting with the existing preview summary text, expanded [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) to cover live and pending badge span text, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show estimated affected tile counts in the on-canvas preview badge while one-shot preview overlays are active.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to share one-shot preview estimate resolution between the status strip and overlay badge, updated [src/ui/armedDebugToolPreviewOverlay.ts](../src/ui/armedDebugToolPreviewOverlay.ts) to append affected-tile text to the on-canvas badge only while preview overlays are active, added focused coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show estimated affected tile counts in the compact status strip while one-shot preview overlays are active.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to reuse the shared line and shape walkers for preview tile-count estimates in the compact status strip, expanded [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts) with line, rectangle, and ellipse coverage, advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show live line or shape span dimensions in the compact status strip while one-shot preview overlays are active.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to append inclusive tile-span dimensions to preview status text for active line, rectangle, and ellipse previews while leaving touch-start-only previews marked pending, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show active one-shot tool anchor and endpoint tile coordinates in the compact status strip while preview overlays are armed.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to derive preview anchor plus endpoint text from shared one-shot preview state, updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) to render a dedicated preview line in the compact strip, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show pinned tile inspect metadata in the debug overlay when a tile is pinned from the compact status strip.
- Changes: Updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to render a separate pinned inspect line alongside the existing pointer line, updated [src/main.ts](../src/main.ts) to pass pinned tile metadata into the overlay payload, added regression coverage in [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show hovered tile gameplay flags in the debug overlay pointer inspect line.
- Changes: Updated [src/main.ts](../src/main.ts) to pass hovered tile gameplay flags into the overlay payload, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to render solid, light-blocking, and liquid state alongside the existing hovered tile inspect data, added regression coverage in [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show hovered tile name plus tile ID in the debug overlay pointer inspect line.
- Changes: Updated [src/main.ts](../src/main.ts) to pass hovered tile identity into the overlay payload, updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to render tile name plus tile ID in the pointer inspect line, added regression coverage in [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show chunk plus chunk-local tile coordinates in the debug overlay pointer inspect line.
- Changes: Updated [src/ui/debugOverlay.ts](../src/ui/debugOverlay.ts) to derive chunk and chunk-local tile coordinates from shared chunk math for pointer inspect text, added regression coverage in [src/ui/debugOverlay.test.ts](../src/ui/debugOverlay.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugOverlay.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show chunk-local tile coordinates alongside world plus chunk coordinates in the compact status strip inspect metadata.
- Changes: Updated [src/main.ts](../src/main.ts) to attach chunk-local inspect coordinates from shared chunk math helpers, updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to render local coordinates for hover, pinned, and shared inspect states, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Stabilize compact status strip inspect hover metadata while the mouse is over the `Pin Click` or `Repin Click` action row.
- Changes: Updated [src/input/controller.ts](../src/input/controller.ts) to preserve mouse inspect state when the pointer leaves the canvas into registered retainer UI, updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) plus [src/main.ts](../src/main.ts) to register the compact status strip action row as a retainer, added regression coverage in [src/input/controller.test.ts](../src/input/controller.test.ts), refined [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/input/controller.test.ts src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.

## 2026-02-28

- Task: Show chunk coordinates alongside tile coordinates in the compact status strip inspect metadata.
- Changes: Updated [src/main.ts](../src/main.ts) to attach chunk coordinates to shared inspect tile state, updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to render chunk coordinates in compact inspect metadata lines, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), advanced [docs/NEXT.md](docs/NEXT.md), and updated [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show the hovered-to-pinned tile offset in the compact status strip when both inspect targets are visible and different.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to append a compact `Hover->Pinned` offset line only for split inspect targets, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), and advanced [docs/NEXT.md](docs/NEXT.md) to the next inspect UX follow-up while updating [docs/CAPABILITIES.md](docs/CAPABILITIES.md).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Label the compact status strip inspect readout as shared when pinned and hovered targets resolve to the same tile.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) so deduplicated same-tile inspect state renders `Shared` labels in both the summary chip and metadata line, added regression coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts), and advanced [docs/NEXT.md](docs/NEXT.md) to the next UX cleanup item.
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Show separate hovered and pinned tile metadata lines in the compact status strip when both inspect targets differ.
- Changes: Updated [src/ui/debugEditStatusHelpers.ts](../src/ui/debugEditStatusHelpers.ts) to emit distinct pinned and hover inspect lines when their targets differ, updated [src/ui/debugEditStatusStrip.ts](../src/ui/debugEditStatusStrip.ts) to render newline-separated inspect text, and added focused coverage in [src/ui/debugEditStatusHelpers.test.ts](../src/ui/debugEditStatusHelpers.test.ts).
- Verification: Ran `npx vitest run src/ui/debugEditStatusHelpers.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Render pinned and hovered inspect outlines simultaneously so desktop inspect-pin workflows can compare a locked tile against the current hover target.
- Changes: Updated [src/ui/hoveredTileCursor.ts](../src/ui/hoveredTileCursor.ts) to manage separate pinned and hovered overlay layers, wired [src/main.ts](../src/main.ts) to pass both inspect targets at render time, and added target-resolution coverage in [src/ui/hoveredTileCursor.test.ts](../src/ui/hoveredTileCursor.test.ts).
- Verification: Ran `npx vitest run src/ui/hoveredTileCursor.test.ts` and `npx tsc --noEmit -p tsconfig.app.json`.
- Task: Reorganized project documentation so `README.md` no longer doubles as both capability inventory and change history.
- Changes: Added [docs/CAPABILITIES.md](docs/CAPABILITIES.md) for current-state features and controls, added [docs/CHANGELOG.md](docs/CHANGELOG.md) for completed task history, trimmed [README.md](../README.md) into a concise project entry point, and updated [AGENTS.md](../AGENTS.md) to direct future agents to the new documentation flow.
- Verification: Reviewed the updated docs for consistency; tests were not run because this was a docs-only change.

## Entry Template

- Task: Short description of the completed roadmap item or documentation pass.
- Changes: The key files or behaviors that changed.
- Verification: Commands run, manual checks performed, or an explicit note that verification was not run.
